(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["people"],{"2bef":function(e,t,a){},"8ae9":function(e,t,a){"use strict";a("2bef")},bea6:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"article"}},[a("v-headpanel",[a("em",[e._v("教师学员信息更换")]),e._v("教师图片尺寸 420x550 jpg/png,学员尺寸575x950 jpg/png,名字图片 75x25 锐字真言体免费商用,<br>是换行符号,学员信息展示前4条 ")]),a("el-button",{staticStyle:{margin:"20px 0"},attrs:{type:"danger",size:"small"},on:{click:e.handleCreate}},[e._v("创建教师学员信息")]),a("el-select",{staticStyle:{"margin-left":"20px"},attrs:{placeholder:"请选择类型"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.select,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"danger"}},[e._v("内容")]),a("div",{staticClass:"articleContent",domProps:{innerHTML:e._s(t.row.content)}})]}}])}),a("el-table-column",{attrs:{label:"ID",prop:"id",width:"50px"}}),a("el-table-column",{attrs:{label:"姓名",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.name,alt:""}})]}}])}),a("el-table-column",{attrs:{label:"描述",prop:"des"}}),a("el-table-column",{attrs:{label:"类型",prop:"type",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("typetab")(t.row.type))+" ")]}}])}),a("el-table-column",{attrs:{label:"图片",prop:"thumb"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.thumb,alt:""}})]}}])}),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"编辑文章信息",visible:e.panelShow,"close-on-click-modal":!1},on:{"update:visible":function(t){e.panelShow=t},opened:e.open}},[a("el-form",{ref:"form",attrs:{model:e.form,inline:!0,rules:e.rules}},[a("el-form-item",{attrs:{label:1==e.form.type?"描述":"名称","label-width":"100px",prop:"des"}},[a("el-input",{model:{value:e.form.des,callback:function(t){e.$set(e.form,"des","string"===typeof t?t.trim():t)},expression:"form.des"}})],1),a("el-form-item",{attrs:{label:"类型","label-width":"100px",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type","string"===typeof t?t.trim():t)},expression:"form.type"}},e._l(e.peopletype,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.form.type,expression:"form.type == 1"}],attrs:{label:"姓名","label-width":"100px",prop:"name"}},[a("v-upload",{attrs:{table:"people",url:e.url},on:{upload:e.updateName}},[a("el-button",{attrs:{type:"danger"}},[e._v("上传姓名图片")])],1)],1),a("el-form-item",{attrs:{label:"缩略图","label-width":"100px",prop:"thumb"}},[a("v-upload",{attrs:{table:"people",url:e.url},on:{upload:e.updateThumb}},[a("el-button",{attrs:{type:"danger"}},[e._v("上传人物图片")])],1)],1),a("el-form-item",{staticClass:"editorcover",attrs:{label:"内容","label-width":"100px",prop:"content"}},[a("v-editor",{ref:"text",staticClass:"editor",attrs:{options:e.editorOption},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content","string"===typeof t?t.trim():t)},expression:"form.content"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closePanel}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1),a("v-upload",{ref:"upload",staticClass:"upload1",attrs:{url:e.url,uploadType:e.uploadType,table:"people"},on:{upload:e.upScuccess}})],1)},n=[],o=a("efe2"),i=(a("74e1"),a("9113"),a("a573"),a("dd8d"),a("b3bc")),r=a("d443"),s=a("7736"),p=a("b881"),u=(a("121a"),a("7e41"),a("96be"),{data:function(){return{url:"uploadfile",uploadType:"*",editorOption:{},textindex:"text",type:"create",index:"",panelShow:!1,resData:[],form:{des:"",type:"1",content:""},peopletype:[{id:"1",name:"教师"},{id:"2",name:"学员"}],rules:{type:[{required:!0,message:"请选择类型",trigger:"change"}]},select:[],value:"0"}},methods:{handleEdit:function(e,t){this.form=JSON.parse(JSON.stringify(t)),this.panelShow=!0,this.type="update",this.index=e},handleCreate:function(){this.form={des:"",type:"1",content:""},this.panelShow=!0,this.type="create"},handleDelete:function(e,t){var a=this;this.deleteAjax("delpeople",{id:t.id},this).then((function(t){a.tableData.splice(e,1),a.$message({type:"success",message:"删除成功"})}))},closePanel:function(){this.panelShow=!1},submit:function(){var e=this,t="",a=JSON.parse(JSON.stringify(this.form));t="create"===this.type?"createpeople":"updatepeople",this.ajax(t,a).then((function(t){e.resetlist().then((function(t){e.closePanel(),e.$message({type:"success",message:"操作成功"})}))})).catch((function(t){e.$message({type:"error",message:"操作失败"+t})}))},open:function(){this.$refs.text.quill.getModule("toolbar").addHandler("image",this.imgHandler),this.$refs.text.quill.getModule("toolbar").addHandler("video",this.videoHandler),this.$refs["form"].clearValidate()},upScuccess:function(e){var t=this,a=e;if(null!=a&&a.length>0){var l=a;t.addRange=t.$refs[this.textindex].quill.getSelection();var n=null!==t.addRange?t.addRange.index:0;l=-1!==l.indexOf("http")?l:"http:"+l,t.$refs[this.textindex].quill.insertEmbed(n,t.uploadType,l,"user")}else this.$message.error("".concat(t.uploadType,"插入失败"))},updateThumb:function(e){this.form.thumb=e},updateName:function(e){this.form.name=e},imgHandler:function(e){this.addRange=this.$refs.text.quill.getSelection(),e&&(this.uploadType="image",this.textindex="text",this.$refs.upload.$refs.inputFile.click())},videoHandler:function(e){this.addRange=this.$refs.text.quill.getSelection(),e&&(this.uploadType="video",this.textindex="text",this.$refs.upload.$refs.inputFile.click())},resetlist:function(){var e=this;return this.get("peoplelist").then((function(t){e.resData=t,e.select=[{name:"全部",id:"0"}].concat(e.peopletype)})).catch((function(t){e.$message({type:"warning",message:"获取列表失败!失败原因:"+t})}))},sort:function(e,t){var a=+e.weight-+t.weight;return a},getdate:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,l=e.getDate();return t+"-"+(a<10?"0"+a:a)+"-"+(l<10?"0"+l:l)+" "+e.toTimeString().substr(0,8)}},created:function(){this.resetlist()},computed:Object(o["a"])({tableData:function(){var e=this;if(+this.value){var t=[];return this.resData.forEach((function(a){a.type===e.value&&t.push(a)})),t}return this.resData}},Object(s["c"])(["website"])),components:{"v-headpanel":i["a"],"v-editor":p["quillEditor"],"v-upload":r["a"]},filters:{typetab:function(e){var t=["教师","学员"];return t[e-1]}}}),d=u,c=(a("8ae9"),a("4ac2")),f=Object(c["a"])(d,l,n,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=people.3105ec16.js.map